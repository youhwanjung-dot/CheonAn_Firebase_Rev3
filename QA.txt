// [TauriApp.tsx] ë°ì´í„° ë¡œë”©ë¶€ ìˆ˜ì •
const initializeData = async () => {
    try {
        const appDataDirPath = await path.appDataDir();
        const userFilePath = await path.join(appDataDirPath, 'database.json');
        
        // [í•µì‹¬ ìˆ˜ì •] tauri.conf.jsonì—ì„œ "public"ì„ ë¦¬ì†ŒìŠ¤ë¡œ ì§€ì •í–ˆìœ¼ë¯€ë¡œ
        // resolveResourceì—ëŠ” 'public/database.json'ì„ ë„˜ê²¨ì•¼ ì •í™•í•œ ê²½ë¡œë¥¼ ì°¾ìŠµë‹ˆë‹¤.
        const resourcePath = await path.resolveResource('public/database.json'); 

        if (await fs.exists(userFilePath)) {
            const localContent = await fs.readTextFile(userFilePath);
            setInventory(JSON.parse(localContent).inventory || []);
            // ... ìƒëµ
        } else {
            // 1ì°¨ í™•ì¸: ê¶Œí•œ ìŠ¤ì½”í”„ ì§„ì… í™•ì¸
            alert("âš ï¸ í™•ì¸(1ì°¨): ë¡œì»¬ íŒŒì¼ ì—†ìŒ. ë¦¬ì†ŒìŠ¤ ì ‘ê·¼ì„ ì‹œë„í•©ë‹ˆë‹¤.");

            // 2ì°¨ í™•ì¸: ë¦¬ì†ŒìŠ¤ ì‹¤ì œ ê²½ë¡œ ì¶œë ¥ ë° ì½ê¸° ì‹œë„
            try {
                const resourceContent = await fs.readTextFile(resourcePath);
                
                if (!resourceContent || resourceContent.trim() === "") {
                    alert(`âŒ í™•ì¸(2ì°¨ ì‹¤íŒ¨): ê²½ë¡œëŠ” ì°¾ì•˜ìœ¼ë‚˜ ë‚´ìš©ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.\nê²½ë¡œ: ${resourcePath}`);
                } else {
                    alert(`âœ… í™•ì¸(2ì°¨ ì„±ê³µ): ë°ì´í„°ë¥¼ ì°¾ì•˜ìŠµë‹ˆë‹¤!\nê¸€ììˆ˜: ${resourceContent.length}`);
                }

                // 3ì°¨ í™•ì¸: ë³µì‚¬ ì‘ì—… í›„ íŒŒì¼ í¬ê¸° ê²€ì¦
                await fs.writeTextFile(userFilePath, resourceContent);
                const verifyFile = await fs.readTextFile(userFilePath);
                alert(`ğŸ“¦ í™•ì¸(3ì°¨): ë³µì‚¬ ì™„ë£Œ. ìµœì¢… íŒŒì¼ í¬ê¸°: ${verifyFile.length} bytes`);
                
                const data = JSON.parse(resourceContent);
                // ... ë°ì´í„° ì„¸íŒ… ë¡œì§ 
            } catch (err) {
                alert(`ğŸš¨ ê¶Œí•œ í˜¹ì€ ê²½ë¡œ ì˜¤ë¥˜: ${err}\nì‹œë„ ê²½ë¡œ: ${resourcePath}`);
            }
        }
    } catch (critical) {
        console.error(critical);
    }
};